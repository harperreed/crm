{"name":"mcp_resources_basic","description":"MCP Resources provide read-only access to CRM data via URIs","given":"A CRM database with contacts, companies, and deals","when":"Client requests resources via crm:// URIs","then":"Server returns JSON data for contacts, companies, deals, and pipeline","uris":["crm://contacts","crm://companies","crm://deals","crm://pipeline"],"validates":["URI scheme parsing","Resource routing","JSON serialization","Empty array handling"]}
{"name":"mcp_resources_individual","description":"MCP Resources support individual entity lookup by ID","given":"A CRM database with at least one contact, company, and deal","when":"Client requests resource with crm://{type}/{uuid} pattern","then":"Server returns JSON for that specific entity with related data","uris":["crm://contacts/{uuid}","crm://companies/{uuid}","crm://deals/{uuid}"],"validates":["UUID parsing","Entity retrieval","Related data inclusion (contacts in company, notes in deal)","Error handling for invalid UUIDs"]}
{"name":"mcp_prompts_contact_summary","description":"contact-summary prompt generates comprehensive contact analysis","given":"A contact with company, relationships, and interaction history","when":"Client invokes contact-summary prompt with contact_id","then":"Prompt returns formatted analysis with role, next steps, and insights","arguments":{"contact_id":"<uuid>"},"validates":["Contact data retrieval","Company name resolution","Relationship counting","Last contacted date formatting"]}
{"name":"mcp_prompts_deal_analysis","description":"deal-analysis prompt analyzes pipeline health","given":"Multiple deals across different stages","when":"Client invokes deal-analysis prompt","then":"Prompt returns pipeline metrics grouped by stage with recommendations","validates":["Stage grouping","Amount aggregation","Deal counting","Pipeline health assessment"]}
{"name":"mcp_prompts_follow_up","description":"follow-up-suggestions prompt uses days_since_contact parameter","given":"Contacts with various last_contacted_at values","when":"Client invokes follow-up-suggestions with days_since_contact parameter","then":"Prompt filters contacts by actual days threshold and shows days ago","arguments":{"days_since_contact":"30"},"validates":["Parameter parsing","Time threshold calculation","Date arithmetic","Never-contacted handling","Days-ago display"]}
{"name":"mcp_prompts_relationship_map","description":"relationship-map prompt supports both contact and company entities","given":"A contact with relationships OR a company with contacts","when":"Client invokes relationship-map with entity_type and entity_id","then":"Prompt returns network map for the specified entity type","arguments":{"entity_type":"contact|company","entity_id":"<uuid>"},"validates":["Entity type routing","Contact relationship retrieval","Company contact listing","Other contact name resolution"]}
{"name":"mcp_prompts_company_overview","description":"company-overview prompt provides complete company summary","given":"A company with contacts and deals","when":"Client invokes company-overview with company_id","then":"Prompt returns company details, contact list, deal summary, and total value","arguments":{"company_id":"<uuid>"},"validates":["Company data retrieval","Contact aggregation","Deal aggregation","Total value calculation","Industry and domain display"]}
{"name":"mcp_error_handling","description":"MCP server handles invalid requests gracefully","given":"MCP server is running","when":"Client sends invalid URI scheme, unknown resource, or malformed UUID","then":"Server returns clear error message without crashing","invalid_inputs":["http://contacts","crm://unknown","crm://contacts/not-a-uuid"],"validates":["URI scheme validation","Resource type validation","UUID format validation","Error message clarity"]}
{"name":"charm_contact_crud","description":"Contact CRUD operations persist to Charm KV with cloud sync","given":"Charm KV client initialized and linked to charm.2389.dev","when":"User creates, reads, updates, and deletes contacts via CLI","then":"All operations succeed with data persisted to encrypted cloud storage","cli_commands":["pagen crm add-contact","pagen crm list-contacts","pagen crm update-contact","pagen crm delete-contact"],"validates":["Contact creation with UUID assignment","List filtering by query and company","Contact field updates","Cascade delete behavior"]}
{"name":"charm_deal_operations","description":"Deal pipeline management with company relationships","given":"Charm KV with at least one company","when":"User creates deals linked to companies and manages pipeline stages","then":"Deals are filterable by stage and company with proper amounts displayed","cli_commands":["pagen crm add-deal","pagen crm list-deals --stage","pagen crm list-deals --company","pagen crm delete-deal"],"validates":["Deal creation with company lookup","Stage-based filtering","Company-based filtering","Currency formatting"]}
{"name":"charm_company_contacts","description":"Company-contact relationships through shared company field","given":"Charm KV initialized","when":"Multiple contacts created with same company name","then":"All contacts appear when filtering by company, company auto-created","cli_commands":["pagen crm add-contact --company","pagen crm list-contacts --company","pagen crm list-companies"],"validates":["Company name denormalization","Contact filtering by company","Auto-company creation on contact add","Company list with search"]}
